<?xml version="1.0" ?>
<robot xmlns:xacro="http://www.ros.org/wiki/xacro" name="thumb">
  
  <xacro:include filename="$(find val_description)/robots/valkyrie_A/xacro/thumb/joint_names.xacro"/>
  <xacro:include filename="$(find val_description)/robots/valkyrie_A/xacro/thumb/joint_axes.xacro"/>
  <xacro:include filename="$(find val_description)/robots/valkyrie_A/xacro/thumb/actuator_names.xacro"/>
  <xacro:include filename="$(find val_description)/robots/valkyrie_A/xacro/thumb/link_names.xacro"/>
  <xacro:include filename="$(find val_description)/robots/valkyrie_A/xacro/thumb/joint_limits.xacro"/>
  <xacro:include filename="$(find val_description)/robots/valkyrie_A/xacro/thumb/frame_parameters.xacro"/>
  <xacro:include filename="$(find val_description)/robots/valkyrie_A/xacro/thumb/mass_parameters.xacro"/>

  <xacro:property name="TJ1_Link_Width" value="0.010"/>
  <xacro:property name="TJ1_Link_Height" value="0.010"/>
  <xacro:property name="TJ1_Link_Length" value="0.010"/>

  <xacro:property name="TJ2_Link_Width" value="0.054"/>
  <xacro:property name="TJ2_Link_Height" value="0.019"/>
  <xacro:property name="TJ2_Link_Length" value="0.026"/>

  <xacro:property name="TJ3_Link_Width" value="0.034"/>
  <xacro:property name="TJ3_Link_Height" value="0.013"/>
  <xacro:property name="TJ3_Link_Length" value="0.022"/>

  <xacro:property name="TJ4_Link_Width" value="0.027"/>
  <xacro:property name="TJ4_Link_Height" value="0.012"/>
  <xacro:property name="TJ4_Link_Length" value="0.019"/>

  <xacro:macro name="make_thumb" params="prefix reflect thumb_root_link">
    <xacro:box_link name="${ThumbRollLinkName}"
                    width="${TJ1_Link_Width}" height="${TJ1_Link_Height}" depth="${TJ1_Link_Length}" mass="${ThumbRollLinkMass}"
                    origin_xyz="${ThumbRollLinkComPosition}"
                    origin_rpy="0 0 0"
                    visual_mesh="${mesh_root}/fingers/thumbj1_${prefix}.dae"
                    material="Gold"
                    collision_mesh="${mesh_root}/fingers/thumbj1_${prefix}.dae"/>

    <xacro:box_link name="${ThumbPitch1LinkName}"
                    width="${TJ2_Link_Width}" height="${TJ2_Link_Height}" depth="${TJ2_Link_Length}" mass="${ThumbPitch1LinkMass}"
                    origin_xyz="${ThumbPitch1LinkComPosition}"
                    origin_rpy="0 0 0"
                    visual_mesh="${mesh_root}/fingers/thumbj2_${prefix}.dae"
                    material="Gold"
                    collision_mesh="${mesh_root}/fingers/thumbj2_${prefix}.dae"/>

    <xacro:box_link name="${ThumbPitch2LinkName}"
                    width="${TJ3_Link_Width}" height="${TJ3_Link_Height}" depth="${TJ3_Link_Length}" mass="${ThumbPitch2LinkMass}"
                    origin_xyz="${ThumbPitch2LinkComPosition}"
                    origin_rpy="0 0 0"
                    visual_mesh="${mesh_root}/fingers/thumbj3_${prefix}.dae"
                    material="Gold"
                    collision_mesh="${mesh_root}/fingers/thumbj3_${prefix}.dae"/>

    <xacro:box_link name="${ThumbPitch3LinkName}"
                    width="${TJ4_Link_Width}" height="${TJ4_Link_Height}" depth="${TJ4_Link_Length}" mass="${ThumbPitch3LinkMass}"
                    origin_xyz="${ThumbPitch3LinkComPosition}"
                    origin_rpy="0 0 0"
                    visual_mesh="${mesh_root}/fingers/thumbj4_${prefix}.dae"
                    material="Gold"
                    collision_mesh="${mesh_root}/fingers/thumbj4_${prefix}.dae"/>

    <xacro:revolute_joint jointName="${ThumbRollJointName}"
                          parent="${ThumbRollParentLinkName}" child="${ThumbRollLinkName}"
                          origin_xyz="${ThumbRollFrameOrigin_X} ${ThumbRollFrameOrigin_Y} ${ThumbRollFrameOrigin_Z}"
                          origin_rpy="${ThumbRollFrameOrientation_Roll} ${ThumbRollFrameOrientation_Pitch} ${ThumbRollFrameOrientation_Yaw}"
                          axis="${ThumbRollRotationAxis}">
        <limit effort="${ThumbRollTorqueLimit}" lower="${ThumbRollPositionLimit_Lower}" upper="${ThumbRollPositionLimit_Upper}" velocity="${ThumbRollVelocityLimit}"/>
    </xacro:revolute_joint>

    <xacro:revolute_joint jointName="${ThumbPitch1JointName}"
                          parent="${ThumbRollLinkName}" child="${ThumbPitch1LinkName}"
                          origin_xyz="${ThumbPitch1FrameOrigin_X} ${ThumbPitch1FrameOrigin_Y} ${ThumbPitch1FrameOrigin_Z}"
                          origin_rpy="${ThumbPitch1FrameOrientation_Roll} ${ThumbPitch1FrameOrientation_Pitch} ${ThumbPitch1FrameOrientation_Yaw}"
                          axis="${ThumbPitch1RotationAxis}">
        <limit effort="${ThumbPitch1TorqueLimit}" lower="${ThumbPitch1PositionLimit_Lower}" upper="${ThumbPitch1PositionLimit_Upper}" velocity="${ThumbPitch1VelocityLimit}"/>
    </xacro:revolute_joint>

    <xacro:revolute_joint jointName="${ThumbPitch2JointName}"
                          parent="${ThumbPitch1LinkName}" child="${ThumbPitch2LinkName}"
                          origin_xyz="${ThumbPitch2FrameOrigin_X} ${ThumbPitch2FrameOrigin_Y} ${ThumbPitch2FrameOrigin_Z}"
                          origin_rpy="${ThumbPitch2FrameOrientation_Roll} ${ThumbPitch2FrameOrientation_Pitch} ${ThumbPitch2FrameOrientation_Yaw}"
                          axis="${ThumbPitch2RotationAxis}">
        <limit effort="${ThumbPitch2TorqueLimit}" lower="${ThumbPitch2PositionLimit_Lower}" upper="${ThumbPitch2PositionLimit_Upper}" velocity="${ThumbPitch2VelocityLimit}"/>
    </xacro:revolute_joint>

    <xacro:revolute_joint jointName="${ThumbPitch3JointName}"
                          parent="${ThumbPitch2LinkName}" child="${ThumbPitch3LinkName}"
                          origin_xyz="${ThumbPitch3FrameOrigin_X} ${ThumbPitch3FrameOrigin_Y} ${ThumbPitch3FrameOrigin_Z}"
                          origin_rpy="${ThumbPitch3FrameOrientation_Roll} ${ThumbPitch3FrameOrientation_Pitch} ${ThumbPitch3FrameOrientation_Yaw}"
                          axis="${ThumbPitch3RotationAxis}">
        <limit effort="${ThumbPitch3TorqueLimit}" lower="${ThumbPitch3PositionLimit_Lower}" upper="${ThumbPitch3PositionLimit_Upper}" velocity="${ThumbPitch3VelocityLimit}"/>
    </xacro:revolute_joint>
  </xacro:macro>

  <xacro:macro name="make_thumb_fixed" params="prefix reflect thumb_root_link">
    <xacro:box_link name="${ThumbRollLinkName}"
                    width="${TJ1_Link_Width}" height="${TJ1_Link_Height}" depth="${TJ1_Link_Length}" mass="${ThumbRollLinkMass}"
                    origin_rpy="0 0 0"
                    origin_xyz="${TJ1_Link_Origin_X} ${TJ1_Link_Origin_Y} ${TJ1_Link_Origin_Z}"
                    visual_mesh="${mesh_root}/fingers/tf1_${prefix}.dae"
                    material="Gold"
                    collision_mesh="${mesh_root}/fingers/tf1_${prefix}.dae"/>

    <xacro:box_link name="${ThumbPitch1LinkName}"
                    width="${TJ2_Link_Width}" height="${TJ2_Link_Height}" depth="${TJ2_Link_Length}" mass="${ThumbPitch1LinkMass}"
                    origin_rpy="0 0 0"
                    origin_xyz="${TJ2_Link_Origin_X} ${TJ2_Link_Origin_Y} ${TJ2_Link_Origin_Z}"
                    visual_mesh="${mesh_root}/fingers/tf2.dae"
                    material="Gold"
                    collision_mesh="${mesh_root}/fingers/tf2.dae"/>

    <xacro:box_link name="${ThumbPitch2LinkName}"
                    width="${TJ3_Link_Width}" height="${TJ3_Link_Height}" depth="${TJ3_Link_Length}" mass="${ThumbPitch2LinkMass}"
                    origin_rpy="0 0 0"
                    origin_xyz="${TJ3_Link_Origin_X} ${TJ3_Link_Origin_Y} ${TJ3_Link_Origin_Z}"
                    visual_mesh="${mesh_root}/fingers/tf3.dae"
                    material="Gold"
                    collision_mesh="${mesh_root}/fingers/tf3.dae"/>

    <xacro:box_link name="${ThumbPitch3LinkName}"
                    width="${TJ4_Link_Width}" height="${TJ4_Link_Height}" depth="${TJ4_Link_Length}" mass="${ThumbPitch3LinkMass}"
                    origin_rpy="0 0 0"
                    origin_xyz="${TJ4_Link_Origin_X} ${TJ4_Link_Origin_Y} ${TJ4_Link_Origin_Z}"
                    visual_mesh="${mesh_root}/fingers/tf4.dae"
                    material="Gold"
                    collision_mesh="${mesh_root}/fingers/tf4.dae"/>

    <xacro:fixed_joint jointName="${ThumbRollJointName}"
                          parent="${ThumbRollParentLinkName}" child="${ThumbRollLinkName}"
                          origin_xyz="${ThumbRollFrameOrigin_X} ${ThumbRollFrameOrigin_Y} ${ThumbRollFrameOrigin_Z}"
                          origin_rpy="${ThumbRollFrameOrientation_Roll} ${ThumbRollFrameOrientation_Pitch} ${ThumbRollFrameOrientation_Yaw}"/>

    <xacro:fixed_joint jointName="${ThumbPitch1JointName}"
                          parent="${ThumbRollLinkName}" child="${ThumbPitch1LinkName}"
                          origin_xyz="${ThumbPitch1FrameOrigin_X} ${ThumbPitch1FrameOrigin_Y} ${ThumbPitch1FrameOrigin_Z}"
                          origin_rpy="${ThumbPitch1FrameOrientation_Roll} ${ThumbPitch1FrameOrientation_Pitch} ${ThumbPitch1FrameOrientation_Yaw}"/>

    <xacro:fixed_joint jointName="${ThumbPitch2JointName}"
                          parent="${ThumbPitch1LinkName}" child="${ThumbPitch2LinkName}"
                          origin_xyz="${ThumbPitch2FrameOrigin_X} ${ThumbPitch2FrameOrigin_Y} ${ThumbPitch2FrameOrigin_Z}"
                          origin_rpy="${ThumbPitch2FrameOrientation_Roll} ${ThumbPitch2FrameOrientation_Pitch} ${ThumbPitch2FrameOrientation_Yaw}"/>

    <xacro:fixed_joint jointName="${ThumbPitch3JointName}"
                          parent="${ThumbPitch2LinkName}" child="${ThumbPitch3LinkName}"
                          origin_xyz="${ThumbPitch3FrameOrigin_X} ${ThumbPitch3FrameOrigin_Y} ${ThumbPitch3FrameOrigin_Z}"
                          origin_rpy="${ThumbPitch3FrameOrientation_Roll} ${ThumbPitch3FrameOrientation_Pitch} ${ThumbPitch3FrameOrientation_Yaw}"/>
  </xacro:macro>

  <xacro:macro name="v1_right_thumb_actuators" params="prefix api">
    <xacro:v1_actuator name="${RTA1_Actuator_Name}" api="${api}" />
    <xacro:v1_actuator name="${RTA2_Actuator_Name}" api="${api}" />
    <xacro:v1_actuator name="${RTA3_Actuator_Name}" api="${api}" />
  </xacro:macro>

  <xacro:macro name="v1_left_thumb_actuators" params="prefix api">
    <xacro:v1_actuator name="${LTA1_Actuator_Name}" api="${api}" />
    <xacro:v1_actuator name="${LTA2_Actuator_Name}" api="${api}" />
    <xacro:v1_actuator name="${LTA3_Actuator_Name}" api="${api}" />
  </xacro:macro>

</robot>

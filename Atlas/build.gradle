apply plugin: 'java'
apply from: 'gradleScripts/util.gradle'

sourceCompatibility = 1.7
version = '0.2.0-alpha'

setupDefaultDirectoryStructure()

setupDefaultRepositories()

setupProjectSpecificDependencies()

apply plugin: 'application'

applicationName = "IHMCAtlasAPI"
mainClassName = "us.ihmc.atlas.AtlasROSAPINetworkProcessor"

startScripts {
    outputs.upToDateWhen { false }

    doLast {
        def simUnixScript = file(outputDir.canonicalPath + "/${applicationName}Simulator")
        simUnixScript.text = unixScript.text.replace("IHMCAtlasAPI", "IHMCAtlasAPISimulator").replace("AtlasROSAPINetworkProcessor", "AtlasROSAPISimulator")
        simUnixScript.setExecutable(true)

        def simWindowsScript = file(outputDir.canonicalPath + "/${applicationName}Simulator.bat")
        simWindowsScript.text = windowsScript.text.replace("IHMCAtlasAPI", "IHMCAtlasAPISimulator").replace("AtlasROSAPINetworkProcessor", "AtlasROSAPISimulator")
    }
}

applicationDistribution.from(startScripts.outputDir) {
    into "bin"
}

applicationDistribution.from(file("Configurations")) {
    include("*network_config.ini")
    into "bin/Configurations"
}